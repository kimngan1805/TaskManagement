<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.taskproject.controller.NoteController">
    <left>
        <!-- Sidebar -->
        <VBox prefHeight="600.0" prefWidth="260.0" styleClass="modern-sidebar">
            <!-- Logo Section with Gradient -->
            <VBox alignment="CENTER" prefHeight="100.0" styleClass="modern-logo-section">
                <VBox alignment="CENTER" styleClass="logo-container">
                    <ImageView fitHeight="50.0" fitWidth="50.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@image/logo.png" />
                        </image>
                    </ImageView>
                    <Label styleClass="logo-text" text="EduPlatform" />
                </VBox>
            </VBox>

            <!-- Navigation Menu with Modern Styling -->
            <VBox prefHeight="470.0" prefWidth="260.0" spacing="8.0" styleClass="modern-nav-menu">
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Home" onAction="#goToHome">
                    <graphic>
                        <ImageView fitHeight="16.0" fitWidth="16.0">
                            <image>
                                <Image url="@image/home.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Project">
                    <graphic>
                        <ImageView fitHeight="16.0" fitWidth="16.0">
                            <image>
                                <Image url="@image/project.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button,nav-active" text=" Note">
                    <graphic>
                        <ImageView fitHeight="16.0" fitWidth="16.0">
                            <image>
                                <Image url="@image/note.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" My Rooms" />
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Activity" />
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Analysis" />
                <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Contacts" />

                <Region VBox.vgrow="ALWAYS" />

                <VBox spacing="8.0" styleClass="bottom-nav-section">
                    <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button" text=" Settings" />
                    <Button mnemonicParsing="false" prefWidth="240.0" styleClass="modern-nav-button-logout" text=" Logout" />
                </VBox>
            </VBox>
        </VBox>
    </left>

    <center>
        <ScrollPane fitToWidth="true" styleClass="modern-scroll-pane">
            <!-- Main Content with Modern Layout -->
            <VBox styleClass="modern-main-content">

                <!-- Modern Header with Glass Effect -->
                <HBox alignment="CENTER_RIGHT" prefHeight="80.0" spacing="20.0" styleClass="modern-header">
                    <HBox alignment="CENTER_LEFT" spacing="15.0" HBox.hgrow="ALWAYS">
                        <VBox spacing="2.0">
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Label styleClass="breadcrumb-text">
                                    <graphic>
                                        <ImageView fitHeight="14.0" fitWidth="14.0">
                                            <image>
                                                <Image url="@image/home.png" />
                                            </image>
                                        </ImageView>
                                    </graphic>
                                </Label>
                                <Label styleClass="breadcrumb-separator" text=">" />
                                <Label styleClass="breadcrumb-current" text="Notes &amp; Tasks" />
                            </HBox>
                        </VBox>
                    </HBox>

                    <!-- Modern Header Actions -->
                    <HBox alignment="CENTER" spacing="12.0">
                        <Button mnemonicParsing="false" styleClass="modern-header-button">
                            <graphic>
                                <ImageView fitHeight="14.0" fitWidth="14.0">
                                    <image>
                                        <Image url="@image/brightness.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                        <Button mnemonicParsing="false" styleClass="modern-header-button">
                            <graphic>
                                <ImageView fitHeight="14.0" fitWidth="14.0">
                                    <image>
                                        <Image url="@image/email.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                        <Button mnemonicParsing="false" styleClass="modern-header-button-notification">
                            <graphic>
                                <ImageView fitHeight="14.0" fitWidth="14.0">
                                    <image>
                                        <Image url="@image/bell.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>

                        <!-- Modern User Profile -->
                        <HBox alignment="CENTER" spacing="12.0" styleClass="modern-user-profile">
                            <VBox alignment="CENTER" prefHeight="45.0" prefWidth="45.0" styleClass="modern-user-avatar">
                                <ImageView fitHeight="24.0" fitWidth="24.0">
                                    <image>
                                        <Image url="@image/user.png" />
                                    </image>
                                </ImageView>
                            </VBox>
                            <VBox alignment="CENTER_LEFT" spacing="2.0">
                                <Label styleClass="user-name-modern" text="Osama.A" />
                                <Label styleClass="user-role-modern" text="Teacher" />
                            </VBox>
                        </HBox>
                    </HBox>
                </HBox>

                <!-- Content Area with Modern Cards -->
                <VBox spacing="25.0" styleClass="modern-content-area">

                    <!-- Note Header Card -->
                    <VBox spacing="20.0" styleClass="modern-project-card">
                        <HBox alignment="CENTER_LEFT" spacing="20.0">
                            <!-- Note Icon -->
                            <VBox alignment="CENTER" prefHeight="70.0" prefWidth="70.0" styleClass="modern-note-icon">
                                <ImageView fitHeight="32.0" fitWidth="32.0">
                                    <image>
                                        <Image url="@image/note.png" />
                                    </image>
                                </ImageView>
                            </VBox>

                            <!-- Note Details -->
                            <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                <Label fx:id="noteTitle" styleClass="modern-note-title" text="My Task Notes" />
                                <Label fx:id="noteDescription" styleClass="modern-note-description"
                                       text="Organize and manage all your tasks efficiently" />
                            </VBox>

                            <!-- Action Button -->
                            <Button fx:id="addTaskBtn" styleClass="modern-add-button" text="+ Add Task" onAction="#showAddTaskDialog" />
                        </HBox>
                    </VBox>

                    <!-- Task Management Tabs -->
                    <VBox spacing="20.0" styleClass="modern-tasks-card">
                        <!-- Tab Navigation -->
                        <HBox spacing="5.0" styleClass="tab-navigation">
                            <Button fx:id="allTasksTab" styleClass="task-tab,tab-active" text="All Tasks" onAction="#showAllTasks" />
                            <Button fx:id="byStatusTab" styleClass="task-tab" text="By Status" onAction="#showByStatus" />
                            <Button fx:id="checklistTab" styleClass="task-tab" text="Checklist" onAction="#showChecklist" />
                        </HBox>

                        <!-- Content Area for Different Views -->
                        <StackPane fx:id="contentArea" prefHeight="500.0">

                            <!-- All Tasks View (Table) -->
                            <VBox fx:id="allTasksView" spacing="15.0">
                                <HBox alignment="CENTER_LEFT" spacing="15.0">
                                    <Label styleClass="view-title" text="All Tasks" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <TextField fx:id="searchField" promptText="ðŸ” Search tasks..." styleClass="search-field-small" />
                                </HBox>

                                <TableView fx:id="taskTable" styleClass="modern-task-table">
                                    <columns>
                                        <TableColumn fx:id="taskNameCol" prefWidth="250.0" text="Task Name" />
                                        <TableColumn fx:id="taskStatusCol" prefWidth="120.0" text="Status" />
                                        <TableColumn fx:id="taskAssignCol" prefWidth="150.0" text="Assigned To" />
                                        <TableColumn fx:id="taskStartDateCol" prefWidth="120.0" text="Start Date" />
                                        <TableColumn fx:id="taskDueDateCol" prefWidth="120.0" text="Due Date" />
                                        <TableColumn fx:id="taskActionsCol" prefWidth="100.0" text="Actions" />
                                    </columns>
                                </TableView>
                            </VBox>

                            <!-- By Status View (Kanban Style) -->
                            <VBox fx:id="byStatusView" spacing="15.0" visible="false" managed="false">
                                <Label styleClass="view-title" text="Tasks by Status" />

                                <HBox spacing="20.0" styleClass="kanban-container">
                                    <!-- Not Started Column -->
                                    <VBox spacing="12.0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
                                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="kanban-header,status-not-started">
                                            <Label styleClass="kanban-title" text="Not Started" />
                                            <Region HBox.hgrow="ALWAYS" />
                                            <Label fx:id="notStartedCount" styleClass="task-count" text="0" />
                                        </HBox>

                                        <ScrollPane fx:id="notStartedPane" styleClass="kanban-scroll" prefHeight="400.0">
                                            <VBox fx:id="notStartedTasks" spacing="8.0" styleClass="task-list" />
                                        </ScrollPane>

                                        <Button styleClass="add-task-kanban" text="+ Add Task"
                                                onAction="#addTaskToNotStarted" />
                                    </VBox>

                                    <!-- In Progress Column -->
                                    <VBox spacing="12.0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
                                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="kanban-header,status-in-progress">
                                            <Label styleClass="kanban-title" text="In Progress" />
                                            <Region HBox.hgrow="ALWAYS" />
                                            <Label fx:id="inProgressCount" styleClass="task-count" text="0" />
                                        </HBox>

                                        <ScrollPane fx:id="inProgressPane" styleClass="kanban-scroll" prefHeight="400.0">
                                            <VBox fx:id="inProgressTasks" spacing="8.0" styleClass="task-list" />
                                        </ScrollPane>

                                        <Button styleClass="add-task-kanban" text="+ Add Task"
                                                onAction="#addTaskToInProgress" />
                                    </VBox>

                                    <!-- Complete Column -->
                                    <VBox spacing="12.0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
                                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="kanban-header,status-complete">
                                            <Label styleClass="kanban-title" text="Complete" />
                                            <Region HBox.hgrow="ALWAYS" />
                                            <Label fx:id="completeCount" styleClass="task-count" text="0" />
                                        </HBox>

                                        <ScrollPane fx:id="completePane" styleClass="kanban-scroll" prefHeight="400.0">
                                            <VBox fx:id="completeTasks" spacing="8.0" styleClass="task-list" />
                                        </ScrollPane>

                                        <Button styleClass="add-task-kanban" text="+ Add Task"
                                                onAction="#addTaskToComplete" />
                                    </VBox>
                                </HBox>
                            </VBox>

                            <!-- Checklist View -->
                            <VBox fx:id="checklistView" spacing="15.0" visible="false" managed="false">
                                <HBox alignment="CENTER_LEFT" spacing="15.0">
                                    <Label styleClass="view-title" text="Task Checklist" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="completionProgress" styleClass="completion-progress" text="0/0 completed" />
                                </HBox>

                                <ScrollPane styleClass="checklist-scroll" prefHeight="450.0">
                                    <VBox fx:id="checklistContainer" spacing="12.0" styleClass="checklist-container" />
                                </ScrollPane>
                            </VBox>

                        </StackPane>
                    </VBox>

                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>